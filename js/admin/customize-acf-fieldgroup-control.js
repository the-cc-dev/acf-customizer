!function a(r,c,f){function s(e,t){if(!c[e]){if(!r[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(u)return u(e,!0);var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}var o=c[e]={exports:{}};r[e][0].call(o.exports,function(t){return s(r[e][1][t]||t)},o,o.exports,a,r,c,f)}return c[e].exports}for(var u="function"==typeof require&&require,t=0;t<f.length;t++)s(f[t]);return s}({1:[function(t,e,n){"use strict";var i,o,a,r,c,f;i=wp.customize,o=jQuery,a=acf_fieldgroup_control,f=[],i.AcfFieldGroupControl=i.Control.extend({preview_context:{type:null,id:null},initialize:function(t,e){var n;n=e||{},i.Control.prototype.initialize.call(this,t,n)},set_preview_context:function(t){return this.preview_context=t,this},ready:function(){var n=this;this.setting(),0<=["post","term","user"].indexOf(n.params.storage_type)&&i.bind("acf-customize-context-changed",function(t){t.type===n.params.storage_type?n.set_preview_context(t).load_form():n.unload_form()}),this.$wrapper=n.container.find(".acf-fields").first(),acf.do_action("append",n.container),n.load_form(),n.container.on("change",".acf-field",function(t){var e=n.container.find(".acf-field :input[name]");acf.validation.errors=[],e.each(function(){this.checkValidity()}),acf.validation.busy=!1,o((r=n).container).data("acf",null),acf.validation.fetch({form:n.container,lock:!1,success:function(t){},complete:function(t){acf.unlockForm(t),setTimeout(function(){n.setting.preview()},100)}})}),i.Control.prototype.ready.apply(n,arguments)},load_form:function(){var t,e=this;(function(t,e){var n={idx:f.length,request:t,done:e,finished:!1,scope:null,arguments:null};f.push(n),t.done(function(){var t;for(n.finished=!0,n.self=this,n.arguments=arguments;f.length&&f[0].finished;)(t=f.shift()).done.apply(t.self,t.arguments)})})(t=wp.ajax.send("load_customizer_field_groups_"+e.id,{data:{wp_customize:"on",section_id:e.id,acf_customize_context:JSON.stringify(e.preview_context),_nonce:a.load_field_group_nonce}}),function(t){e.$wrapper.html(t.html),e.init_fields()}),t.fail(function(t){console.log(" - load field group failure")}),t.always(function(){t=null})},unload_form:function(){this.$wrapper.html("")},init_fields:function(){var t=this;t.$fields=t.container.find(".acf-fields > .acf-field"),setTimeout(function(){acf.doAction("ready",t.$wrapper),acf.doAction("prepare")},1)},updateValues:function(){var t,e=this.container.find(".acf-field :input");e.each(function(){var t=o(this).attr("name");t&&(o(this).data("prev-name",t),o(this).attr("name",t.replace(/\[([0-9]+)\]/g,"[_$1]")))}),t=e.serializeJSON({useIntKeysAsArrayIndex:!1}),e.each(function(){o(this).attr("name",o(this).data("prev-name")),o(this).data("prev-name",null)}),this.setting._value.___acf_customizer_dirty=!0,this.setting.set(function n(i){return o.isPlainObject(i)&&(Object.keys(i).join("").match(/^([0-9_]+)$/)&&(i=Object.values(i)),o.each(i,function(t,e){i[t]=n(e)})),i}(t[this.id]))},focusField:function(t){for(var e,n=this.$wrapper,i=[];t.length;)if(e=t.pop(),(n=_.isNumber(e)?n.is('[data-type="flexible_content"]')?n.find("> .acf-input > .acf-flexible-content > .values").children(":not(.acf-clone)").eq(e):!!n.is('[data-type="repeater"]')&&n.find("> .acf-input > .acf-repeater > .acf-table > tbody").children(":not(.acf-clone)").eq(e):n.find('[data-key="'+e+'"]'))&&n.is("[data-id]")&&i.push(n),!n.length)return!1;return this.focus(),setTimeout(function(){i.length&&function(t){t.forEach(function(t){var e=acf.getField(t.closest(".acf-field"));t.siblings().not(t).each(function(){"repeater"===e.type?e.collapse(o(this)):"flexible_content"===e.type&&e.closeLayout(o(this))}),"repeater"===e.type?e.expand(t):"flexible_content"===e.type&&e.openLayout(t)})}(i),_.isNumber(e)?n.attr("tabindex",1).focus():n.find("input").focus()},500),!0}}),acf.add_action("validation_success",function(t){r.updateValues()}),acf.add_action("validation_failure",function(t){r.container.find("> .acf-error-message").remove()}),acf.add_action("invalid",function(t){acf.validation.busy=!0}),i.bind("ready",function(){i.previewer.bind("acf-customize-context",function(t){var e;e=c,JSON.stringify(t)!=JSON.stringify(e)&&i.trigger("acf-customize-context-changed",t),c=t}),i.previewer.bind("focus-control-for-setting",function(t){}),i.previewer.bind("acf-focus",function(e){var n=e.pop();console.log(n);try{i.control.each(function(t){if(t.constructor===i.AcfFieldGroupControl&&n===t.id)throw t.focusField(e),"break loop"})}catch(t){}})}),i.bind("save-request-params",function(t){_.extend(t,{acf_customize_context:JSON.stringify(c)})}),i.controlConstructor.acf_customizer=i.AcfFieldGroupControl,i.bind("changeset-error",function(){})},{}]},{},[1]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFkbWluL25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJhZG1pbi9zcmMvanMvYWRtaW4vY3VzdG9taXplLWFjZi1maWVsZGdyb3VwLWNvbnRyb2wvaW5kZXguanMiXSwibmFtZXMiOlsiciIsImUiLCJuIiwidCIsIm8iLCJpIiwiZiIsImMiLCJyZXF1aXJlIiwidSIsImEiLCJFcnJvciIsImNvZGUiLCJwIiwiZXhwb3J0cyIsImNhbGwiLCJsZW5ndGgiLCIxIiwibW9kdWxlIiwiYXBpIiwiJCIsIm9wdGlvbnMiLCJjdXJyZW50X2NvbnRyb2wiLCJhY2ZfY3VzdG9taXplX2NvbnRleHQiLCJxdWV1ZSIsIndwIiwiY3VzdG9taXplIiwialF1ZXJ5IiwiYWNmX2ZpZWxkZ3JvdXBfY29udHJvbCIsIkFjZkZpZWxkR3JvdXBDb250cm9sIiwiQ29udHJvbCIsImV4dGVuZCIsInByZXZpZXdfY29udGV4dCIsInR5cGUiLCJpZCIsImluaXRpYWxpemUiLCJvcHQiLCJhcmdzIiwicHJvdG90eXBlIiwidGhpcyIsInNldF9wcmV2aWV3X2NvbnRleHQiLCJjb250ZXh0IiwicmVhZHkiLCJjb250cm9sIiwic2V0dGluZyIsImluZGV4T2YiLCJwYXJhbXMiLCJzdG9yYWdlX3R5cGUiLCJiaW5kIiwibG9hZF9mb3JtIiwidW5sb2FkX2Zvcm0iLCIkd3JhcHBlciIsImNvbnRhaW5lciIsImZpbmQiLCJmaXJzdCIsImFjZiIsImRvX2FjdGlvbiIsIm9uIiwiJGlucHV0cyIsInZhbGlkYXRpb24iLCJlcnJvcnMiLCJlYWNoIiwiY2hlY2tWYWxpZGl0eSIsImJ1c3kiLCJkYXRhIiwiZmV0Y2giLCJmb3JtIiwibG9jayIsInN1Y2Nlc3MiLCIkZm9ybSIsImNvbXBsZXRlIiwidW5sb2NrRm9ybSIsInNldFRpbWVvdXQiLCJwcmV2aWV3IiwiYXBwbHkiLCJhcmd1bWVudHMiLCJyZXF1ZXN0IiwiZG9uZSIsIml0ZW0iLCJpZHgiLCJmaW5pc2hlZCIsInNjb3BlIiwicHVzaCIsIml0Iiwic2VsZiIsInNoaWZ0IiwiZW5xdWV1ZSIsImFqYXgiLCJzZW5kIiwid3BfY3VzdG9taXplIiwic2VjdGlvbl9pZCIsIkpTT04iLCJzdHJpbmdpZnkiLCJfbm9uY2UiLCJsb2FkX2ZpZWxkX2dyb3VwX25vbmNlIiwicmVzcG9uc2UiLCJodG1sIiwiaW5pdF9maWVsZHMiLCJmYWlsIiwiY29uc29sZSIsImxvZyIsImFsd2F5cyIsIiRmaWVsZHMiLCJkb0FjdGlvbiIsInVwZGF0ZVZhbHVlcyIsInZhbHVlIiwibmFtZSIsImF0dHIiLCJyZXBsYWNlIiwic2VyaWFsaXplSlNPTiIsInVzZUludEtleXNBc0FycmF5SW5kZXgiLCJfdmFsdWUiLCJfX19hY2ZfY3VzdG9taXplcl9kaXJ0eSIsInNldCIsImZpeE51bUtleXMiLCJvYmoiLCJpc1BsYWluT2JqZWN0IiwiT2JqZWN0Iiwia2V5cyIsImpvaW4iLCJtYXRjaCIsInZhbHVlcyIsImVsIiwiZm9jdXNGaWVsZCIsInBhdGgiLCJjdXJyZW50IiwiJGZvY3VzRWwiLCJleHBhbmQiLCJwb3AiLCJfIiwiaXNOdW1iZXIiLCJpcyIsImNoaWxkcmVuIiwiZXEiLCJmb2N1cyIsImZvckVhY2giLCIkcm93IiwiZmllbGQiLCJnZXRGaWVsZCIsImNsb3Nlc3QiLCJzaWJsaW5ncyIsIm5vdCIsImNvbGxhcHNlIiwiY2xvc2VMYXlvdXQiLCJvcGVuTGF5b3V0IiwiZXhwYW5kUmVwZWF0YWJsZXMiLCJhZGRfYWN0aW9uIiwicmVtb3ZlIiwiJGlucHV0IiwicHJldmlld2VyIiwibmV3X3ZhbCIsInByZXZfdmFsIiwidHJpZ2dlciIsInNldHRpbmdJZCIsImNvbnN0cnVjdG9yIiwiZXJyIiwicXVlcnkiLCJjb250cm9sQ29uc3RydWN0b3IiXSwibWFwcGluZ3MiOiJDQUFBLFNBQUFBLEVBQUFDLEVBQUFDLEVBQUFDLEdBQUEsU0FBQUMsRUFBQUMsRUFBQUMsR0FBQSxJQUFBSixFQUFBRyxHQUFBLENBQUEsSUFBQUosRUFBQUksR0FBQSxDQUFBLElB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ImZpbGUiOiJhZG1pbi9jdXN0b21pemUtYWNmLWZpZWxkZ3JvdXAtY29udHJvbC5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCJcbihmdW5jdGlvbiggYXBpLCAkLCBvcHRpb25zICkge1xuXG5cdC8vIHN0b3JlIGZvciBhY2YncyBzdGF0aWMgdmFsaWRhdGlvbiBjYWxsYmFja3Ncblx0dmFyIGN1cnJlbnRfY29udHJvbCxcblx0XHRhY2ZfY3VzdG9taXplX2NvbnRleHQsXG5cdFx0cXVldWUgPSBbXTtcblxuXHQvLyB2YXIgX2lzRXF1YWwgPSBfLmlzRXF1YWwsXG5cdC8vIFx0aXNFcXVhbFBhdGNoID0gZnVuY3Rpb24ob2JqZWN0LG90aGVyKSB7XG5cdC8vIFx0aWYgKCBfLmlzT2JqZWN0KG9iamVjdCkgJiYgXy5pc09iamVjdChvdGhlcikgJiYgISBfaXNFcXVhbCggT2JqZWN0LmtleXMob2JqZWN0KSwgT2JqZWN0LmtleXMob3RoZXIpICkgKSB7XG5cdC8vIFx0XHRyZXR1cm4gZmFsc2U7XG5cdC8vIFx0fVxuXHQvLyBcdHJldHVybiBfaXNFcXVhbChvYmplY3Qsb3RoZXIpO1xuXHQvLyB9XG5cblx0Ly8gbWFrZSBzdXJlIGZpZWxkcyBnZXQgaW5pdGVkIGluIHRoZSBvcmRlciB0aGV5IGFwcGVhciBpbiB0aGUgZG9tXG5cdGZ1bmN0aW9uIGVucXVldWUocmVxdWVzdCxkb25lKSB7XG5cdFx0dmFyIGlkeCA9IHF1ZXVlLmxlbmd0aCxcblx0XHRcdGl0ZW0gPSB7IGlkeDppZHgsIHJlcXVlc3Q6cmVxdWVzdCwgZG9uZTogZG9uZSwgZmluaXNoZWQ6ZmFsc2UsIHNjb3BlOm51bGwsIGFyZ3VtZW50czpudWxsIH07XG5cblx0XHRxdWV1ZS5wdXNoKCBpdGVtICk7XG5cblx0XHRyZXF1ZXN0LmRvbmUoIGZ1bmN0aW9uKCl7XG5cdFx0XHR2YXIgaXQ7XG5cdFx0XHRpdGVtLmZpbmlzaGVkID0gdHJ1ZTtcblx0XHRcdGl0ZW0uc2VsZiA9IHRoaXM7XG5cdFx0XHRpdGVtLmFyZ3VtZW50cyA9IGFyZ3VtZW50cztcblx0XHRcdHdoaWxlICggcXVldWUubGVuZ3RoICYmIHF1ZXVlWzBdLmZpbmlzaGVkICkge1xuXHRcdFx0XHRpdCA9IHF1ZXVlLnNoaWZ0KCk7XG5cdFx0XHRcdGl0LmRvbmUuYXBwbHkoIGl0LnNlbGYsIGl0LmFyZ3VtZW50cyApO1xuXHRcdFx0fVxuXHRcdH0gKTtcblx0fVxuXG5cblx0ZnVuY3Rpb24gZXhwYW5kUmVwZWF0YWJsZXMoIGV4cGFuZCApIHtcblx0XHRyZXR1cm4gZXhwYW5kLmZvckVhY2goZnVuY3Rpb24oJHJvdyl7XG5cdFx0XHR2YXIgZmllbGQgPSBhY2YuZ2V0RmllbGQoICRyb3cuY2xvc2VzdCgnLmFjZi1maWVsZCcpICk7XG5cdFx0XHQvLyBjb2xsYXBzZSBvdGhlcnNcblx0XHRcdCRyb3cuc2libGluZ3MoKS5ub3QoJHJvdykuZWFjaChmdW5jdGlvbigpe1xuXHRcdFx0XHRpZiAoIGZpZWxkLnR5cGUgPT09ICdyZXBlYXRlcicgKSB7XG5cdFx0XHRcdFx0ZmllbGQuY29sbGFwc2UoJCh0aGlzKSk7XG5cdFx0XHRcdH0gZWxzZSBpZiAoIGZpZWxkLnR5cGUgPT09ICdmbGV4aWJsZV9jb250ZW50JyApIHtcblx0XHRcdFx0XHRmaWVsZC5jbG9zZUxheW91dCgkKHRoaXMpKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblx0XHRcdGlmICggZmllbGQudHlwZSA9PT0gJ3JlcGVhdGVyJyApIHtcblx0XHRcdFx0ZmllbGQuZXhwYW5kKCRyb3cpO1xuXHRcdFx0fSBlbHNlIGlmICggZmllbGQudHlwZSA9PT0gJ2ZsZXhpYmxlX2NvbnRlbnQnICkge1xuXHRcdFx0XHRmaWVsZC5vcGVuTGF5b3V0KCRyb3cpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdH1cblxuXG5cdGFwaS5BY2ZGaWVsZEdyb3VwQ29udHJvbCA9IGFwaS5Db250cm9sLmV4dGVuZCh7XG5cdFx0cHJldmlld19jb250ZXh0OiB7XG5cdFx0XHR0eXBlOiBudWxsLFxuXHRcdFx0aWQ6IG51bGwsXG5cdFx0fSxcblx0XHRpbml0aWFsaXplOiBmdW5jdGlvbiggaWQsIG9wdCApIHtcblx0XHRcdHZhciBjb250cm9sID0gdGhpcywgYXJncztcblxuICAgICAgICAgICAgYXJncyA9IG9wdCB8fCB7fTtcblxuXHRcdFx0YXBpLkNvbnRyb2wucHJvdG90eXBlLmluaXRpYWxpemUuY2FsbCggY29udHJvbCwgaWQsIGFyZ3MgKTtcblxuXHRcdH0sXG5cdFx0c2V0X3ByZXZpZXdfY29udGV4dDogZnVuY3Rpb24oY29udGV4dCkge1xuXHRcdFx0dGhpcy5wcmV2aWV3X2NvbnRleHQgPSBjb250ZXh0O1xuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fSxcblx0XHRyZWFkeTogZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgY29udHJvbCA9IHRoaXMsXG5cdFx0XHRcdHNldHRpbmdzID0gdGhpcy5zZXR0aW5nKCk7XG5cblx0XHRcdGlmICggMCA8PSBbJ3Bvc3QnLCd0ZXJtJywndXNlciddLmluZGV4T2YoIGNvbnRyb2wucGFyYW1zLnN0b3JhZ2VfdHlwZSApICkge1xuXHRcdFx0XHQvLyByZWxvYWQgZmllbGRzIGlmIHByZXZpZXcgdXJsIGNoYW5nZWRcblx0XHRcdFx0YXBpLmJpbmQoICdhY2YtY3VzdG9taXplLWNvbnRleHQtY2hhbmdlZCcsIGZ1bmN0aW9uKCBjb250ZXh0ICkge1xuXG5cdFx0XHRcdFx0aWYgKCBjb250ZXh0LnR5cGUgPT09IGNvbnRyb2wucGFyYW1zLnN0b3JhZ2VfdHlwZSApIHtcblx0XHRcdFx0XHRcdGNvbnRyb2xcblx0XHRcdFx0XHRcdFx0LnNldF9wcmV2aWV3X2NvbnRleHQoIGNvbnRleHQgKVxuXHRcdFx0XHRcdFx0XHQubG9hZF9mb3JtKCk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGNvbnRyb2wudW5sb2FkX2Zvcm0oKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gKTtcblxuXHRcdFx0fVxuXG5cdFx0XHR0aGlzLiR3cmFwcGVyID0gY29udHJvbC5jb250YWluZXIuZmluZCgnLmFjZi1maWVsZHMnKS5maXJzdCgpO1xuXHRcdFx0YWNmLmRvX2FjdGlvbiggJ2FwcGVuZCcsIGNvbnRyb2wuY29udGFpbmVyICk7XG5cblx0XHRcdGNvbnRyb2wubG9hZF9mb3JtKCk7XG5cblx0XHRcdGNvbnRyb2wuY29udGFpbmVyLm9uKCdjaGFuZ2UnLCcuYWNmLWZpZWxkJywgZnVuY3Rpb24oZSl7XG5cdFx0XHRcdC8vKlxuXHRcdFx0XHQvLyBjaGVjayB2YWxpZFxuXHRcdFx0XHR2YXIgJGlucHV0cyA9IGNvbnRyb2wuY29udGFpbmVyLmZpbmQoJy5hY2YtZmllbGQgOmlucHV0W25hbWVdJyk7XG5cblx0XHRcdFx0YWNmLnZhbGlkYXRpb24uZXJyb3JzID0gW107XG5cdFx0XHRcdCRpbnB1dHMuZWFjaChmdW5jdGlvbigpe1xuXHRcdFx0XHRcdHRoaXMuY2hlY2tWYWxpZGl0eSgpO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHRhY2YudmFsaWRhdGlvbi5idXN5ID0gZmFsc2U7XG5cdFx0XHRcdGN1cnJlbnRfY29udHJvbCA9IGNvbnRyb2w7XG5cblx0XHRcdFx0Ly8gcmVzZXQgdmFsaWRhdGlvbiBzdGF0dXNcblx0XHRcdFx0JCggY29udHJvbC5jb250YWluZXIgKS5kYXRhKCdhY2YnLG51bGwpO1xuXG5cdFx0XHRcdGFjZi52YWxpZGF0aW9uLmZldGNoKCB7XG5cdFx0XHRcdFx0Zm9ybTogY29udHJvbC5jb250YWluZXIsXG5cdFx0XHRcdFx0bG9jazpmYWxzZSxcblx0XHRcdFx0XHRzdWNjZXNzOmZ1bmN0aW9uKCRmb3JtKSB7XG5cdFx0XHRcdFx0XHQvLyBhbGxvdyBmb3Igc3VibWl0XG5cdFx0XHRcdFx0XHQvLyBhY2YudmFsaWRhdGlvbi5pZ25vcmUgPSAxO1xuXHRcdFx0XHRcdFx0Ly8gJGJ1dHRvbi50cmlnZ2VyKCdjbGljaycpO1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0Y29tcGxldGU6ZnVuY3Rpb24oJGZvcm0pIHtcblx0XHRcdFx0XHRcdGFjZi51bmxvY2tGb3JtKCAkZm9ybSApO1xuXHRcdFx0XHRcdFx0c2V0VGltZW91dCggZnVuY3Rpb24oKXsgY29udHJvbC5zZXR0aW5nLnByZXZpZXcoKTsgfSwgMTAwICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9ICk7XG5cblx0XHRcdH0pO1xuXG5cdFx0XHRhcGkuQ29udHJvbC5wcm90b3R5cGUucmVhZHkuYXBwbHkoIGNvbnRyb2wsIGFyZ3VtZW50cyApO1xuXG5cdFx0fSxcblx0XHRsb2FkX2Zvcm06IGZ1bmN0aW9uKCkge1xuXG5cdFx0XHR2YXIgY29udHJvbCA9IHRoaXMsXG5cdFx0XHRcdHJlcXVlc3Q7XG5cblx0XHRcdHJlcXVlc3QgPSB3cC5hamF4LnNlbmQoICdsb2FkX2N1c3RvbWl6ZXJfZmllbGRfZ3JvdXBzXycgKyBjb250cm9sLmlkLCB7XG5cdFx0XHRcdGRhdGE6IHtcblx0XHRcdFx0XHR3cF9jdXN0b21pemVcdFx0XHQ6ICdvbicsXG5cdFx0XHRcdFx0c2VjdGlvbl9pZFx0XHRcdFx0OiBjb250cm9sLmlkLFxuXHRcdFx0XHRcdGFjZl9jdXN0b21pemVfY29udGV4dFx0OiBKU09OLnN0cmluZ2lmeSggY29udHJvbC5wcmV2aWV3X2NvbnRleHQgKSxcblx0XHRcdFx0XHRfbm9uY2VcdFx0XHRcdFx0OiBvcHRpb25zLmxvYWRfZmllbGRfZ3JvdXBfbm9uY2UsXG5cdFx0XHRcdH1cblx0XHRcdH0gKTtcblxuXG5cdFx0XHRlbnF1ZXVlKCByZXF1ZXN0LCBmdW5jdGlvbihyZXNwb25zZSkge1xuXG5cdFx0XHRcdGNvbnRyb2wuJHdyYXBwZXIuaHRtbCggcmVzcG9uc2UuaHRtbCApO1xuXG5cdFx0XHRcdGNvbnRyb2wuaW5pdF9maWVsZHMoKTtcblxuXHRcdFx0fSApO1xuXHRcdFx0cmVxdWVzdC5mYWlsKCBmdW5jdGlvbiggcmVzcG9uc2UgKSB7XG5cdFx0XHRcdGNvbnNvbGUubG9nKCcgLSBsb2FkIGZpZWxkIGdyb3VwIGZhaWx1cmUnKVxuXHRcdFx0fSApO1xuXG5cdFx0XHRyZXF1ZXN0LmFsd2F5cyggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJlcXVlc3QgPSBudWxsO1xuXHRcdFx0fSApO1xuXG5cdFx0fSxcblx0XHR1bmxvYWRfZm9ybTogZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgY29udHJvbCA9IHRoaXM7XG5cblx0XHRcdGNvbnRyb2wuJHdyYXBwZXIuaHRtbCggJycgKTtcblx0XHR9LFxuXHRcdGluaXRfZmllbGRzOiBmdW5jdGlvbigpIHtcblxuXHRcdFx0dmFyIGNvbnRyb2wgPSB0aGlzO1xuXG5cdFx0XHRjb250cm9sLiRmaWVsZHMgPSBjb250cm9sLmNvbnRhaW5lci5maW5kKCcuYWNmLWZpZWxkcyA+IC5hY2YtZmllbGQnKTtcblxuXHRcdFx0Ly8gd2lsbCBpbml0IGZpZWxkc1xuXHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpe1xuXHRcdFx0XHRhY2YuZG9BY3Rpb24oJ3JlYWR5JywgY29udHJvbC4kd3JhcHBlcik7XG5cdFx0XHRcdGFjZi5kb0FjdGlvbigncHJlcGFyZScpO1xuXHRcdFx0fSwxKTtcblx0XHR9LFxuXHRcdHVwZGF0ZVZhbHVlczogZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgY29udHJvbCA9IHRoaXMsXG5cdFx0XHRcdCRpbnB1dHMgPSBjb250cm9sLmNvbnRhaW5lci5maW5kKCcuYWNmLWZpZWxkIDppbnB1dCcpLFxuXHRcdFx0XHR2YWx1ZTtcblxuXHRcdFx0Ly8gY29udmVydCBvYmplY3Qgd2l0aCBwcmVmaXhlZCBudW1lcmljIGtleXMgdG8gYXJyYXlcblx0XHRcdGZ1bmN0aW9uIGZpeE51bUtleXMoIG9iaiApIHtcblx0XHRcdFx0aWYgKCAkLmlzUGxhaW5PYmplY3QoIG9iaiApICkge1xuXHRcdFx0XHRcdC8vIGNvbnZlcnQgb2JqZWN0cyB3aXRoIG51bWVyaWMga2V5cyB0byBhcnJheVxuXHRcdFx0XHRcdGlmICggT2JqZWN0LmtleXMoIG9iaiApLmpvaW4oJycpLm1hdGNoKC9eKFswLTlfXSspJC8pICkge1xuXHRcdFx0XHRcdFx0b2JqID0gT2JqZWN0LnZhbHVlcyggb2JqICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdC8vIHJlY3Vyc2Vcblx0XHRcdFx0XHQkLmVhY2goIG9iaixmdW5jdGlvbiggaSwgZWwgKXtcblx0XHRcdFx0XHRcdG9ialtpXSA9IGZpeE51bUtleXMoIGVsICk7XG5cdFx0XHRcdFx0fSApO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBvYmo7XG5cdFx0XHR9XG5cblx0XHRcdC8vIHByZWZpeCBudW1lcmljIGtleXMgd2l0aCBgX2Bcblx0XHRcdC8vIHJlcGVhdGVyIGZpZWxkIG5hbWVzIGhhdmUgbnVtZXJpYyBrZXlzLCB3aGljaCBnZXQgYXV0b21hdGljYWxseSBzb3J0ZWQgdXBvbiBzZXJpYWxpemF0aW9uLlxuXHRcdFx0JGlucHV0cy5lYWNoKGZ1bmN0aW9uKCl7XG5cdFx0XHRcdHZhciBuYW1lID0gJCh0aGlzKS5hdHRyKCduYW1lJyk7XG5cblx0XHRcdFx0aWYgKCAhIG5hbWUgKSB7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHRcdCQodGhpcykuZGF0YSgncHJldi1uYW1lJywgbmFtZSApO1xuXHRcdFx0XHQkKHRoaXMpLmF0dHIoJ25hbWUnLG5hbWUucmVwbGFjZSggL1xcWyhbMC05XSspXFxdL2csICdcXFtfJDFcXF0nKSk7XG5cdFx0XHR9KTtcblxuXHRcdFx0dmFsdWUgPSAkaW5wdXRzLnNlcmlhbGl6ZUpTT04oe1xuXHRcdFx0XHR1c2VJbnRLZXlzQXNBcnJheUluZGV4OmZhbHNlLFxuXHRcdFx0fSk7XG5cblx0XHRcdC8vIC4uLiByZXN0b3JpbmcgZmllbGQgbmFtZXMgdG8gcHJldmlvdXMgc3RhdGVcblx0XHRcdCRpbnB1dHMuZWFjaChmdW5jdGlvbigpe1xuXHRcdFx0XHQkKHRoaXMpLmF0dHIoICduYW1lJywgJCh0aGlzKS5kYXRhKCdwcmV2LW5hbWUnKSApO1xuXHRcdFx0XHQkKHRoaXMpLmRhdGEoJ3ByZXYtbmFtZScsIG51bGwgKTtcblx0XHRcdH0pO1xuXG5cdFx0XHQvLyBmb3JjZSB2YWx1ZSB1cGRhdGVcblx0XHRcdGNvbnRyb2wuc2V0dGluZy5fdmFsdWUuX19fYWNmX2N1c3RvbWl6ZXJfZGlydHkgPSB0cnVlO1xuXHRcdFx0Ly8gdXBkYXRlIGN1c3RvbWl6ZXIgdmFsdWVcblx0XHRcdGNvbnRyb2wuc2V0dGluZy5zZXQoIGZpeE51bUtleXMoIHZhbHVlW3RoaXMuaWQgXSApICk7XG5cblx0XHR9LFxuXHRcdGZvY3VzRmllbGQ6ZnVuY3Rpb24oIHBhdGggKSB7XG5cdFx0XHR2YXIgY3VycmVudCwgc2VsZWN0b3IsICRmb2N1c0VsID0gdGhpcy4kd3JhcHBlciwgZXhwYW5kID0gW107XG5cblx0XHRcdHdoaWxlICggcGF0aC5sZW5ndGggKSB7XG5cdFx0XHRcdGN1cnJlbnQgPSBwYXRoLnBvcCgpO1xuXG5cdFx0XHRcdGlmICggXy5pc051bWJlciggY3VycmVudCApICkge1xuXG5cdFx0XHRcdFx0aWYgKCAkZm9jdXNFbC5pcygnW2RhdGEtdHlwZT1cImZsZXhpYmxlX2NvbnRlbnRcIl0nKSApIHtcblx0XHRcdFx0XHRcdCRmb2N1c0VsID0gJGZvY3VzRWwuZmluZCgnPiAuYWNmLWlucHV0ID4gLmFjZi1mbGV4aWJsZS1jb250ZW50ID4gLnZhbHVlcycpLmNoaWxkcmVuKCc6bm90KC5hY2YtY2xvbmUpJykuZXEoY3VycmVudCk7XG5cdFx0XHRcdFx0fSBlbHNlIGlmICggJGZvY3VzRWwuaXMoJ1tkYXRhLXR5cGU9XCJyZXBlYXRlclwiXScpICkge1xuXHRcdFx0XHRcdFx0JGZvY3VzRWwgPSAkZm9jdXNFbC5maW5kKCc+IC5hY2YtaW5wdXQgPiAuYWNmLXJlcGVhdGVyID4gLmFjZi10YWJsZSA+IHRib2R5JykuY2hpbGRyZW4oJzpub3QoLmFjZi1jbG9uZSknKS5lcShjdXJyZW50KTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0JGZvY3VzRWwgPSBmYWxzZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0JGZvY3VzRWwgPSAkZm9jdXNFbC5maW5kKCdbZGF0YS1rZXk9XCInK2N1cnJlbnQrJ1wiXScpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmICggISEgJGZvY3VzRWwgJiYgJGZvY3VzRWwuaXMoJ1tkYXRhLWlkXScpICkge1xuXHRcdFx0XHRcdGV4cGFuZC5wdXNoKCAkZm9jdXNFbCApXG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKCAhICRmb2N1c0VsLmxlbmd0aCApIHtcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gZm9jdXMgY29udHJvbFxuXHRcdFx0dGhpcy5mb2N1cygpO1xuXG5cdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG5cdFx0XHRcdC8vIGV4cGFuZCByZXBlYXRhYmxlLCBjb2xsYXBzZSBvdGhlcnNcblx0XHRcdFx0aWYgKCBleHBhbmQubGVuZ3RoICkge1xuXHRcdFx0XHRcdGV4cGFuZFJlcGVhdGFibGVzKCBleHBhbmQgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmICggISBfLmlzTnVtYmVyKCBjdXJyZW50ICkgKSB7XG5cdFx0XHRcdFx0Ly8gZm9jdXMgaW5wdXQgLi5cblx0XHRcdFx0XHQkZm9jdXNFbC5maW5kKCdpbnB1dCcpLmZvY3VzKCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Ly8gLi4uIG9yIGZvY3VzIHJlcGVhdGFibGVcblx0XHRcdFx0XHQkZm9jdXNFbC5hdHRyKCd0YWJpbmRleCcsMSkuZm9jdXMoKVxuXHRcdFx0XHR9XG5cdFx0XHR9LDUwMCk7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cdH0pO1xuXG5cdGFjZi5hZGRfYWN0aW9uKCd2YWxpZGF0aW9uX3N1Y2Nlc3MnLCBmdW5jdGlvbihlKSB7XG5cdFx0Y3VycmVudF9jb250cm9sLnVwZGF0ZVZhbHVlcygpO1xuXHR9KTtcblx0YWNmLmFkZF9hY3Rpb24oJ3ZhbGlkYXRpb25fZmFpbHVyZScsZnVuY3Rpb24oZSl7XG5cdFx0Ly8gbmVlZCB0byByZW1vdmUgYWNmIG1lc3NhZ2UgYmVjYXVzZSBpdCBkaXNwbGF5cyBhIHdyb25nIG51bWJlciBvZiBpbnZhbGlkIGZpZWxkc1xuXHRcdGN1cnJlbnRfY29udHJvbC5jb250YWluZXIuZmluZCgnPiAuYWNmLWVycm9yLW1lc3NhZ2UnKS5yZW1vdmUoKTtcblx0fSk7XG5cdGFjZi5hZGRfYWN0aW9uKCdpbnZhbGlkJywgZnVuY3Rpb24oJGlucHV0KXtcblx0XHRhY2YudmFsaWRhdGlvbi5idXN5ID0gdHJ1ZTtcblx0fSk7XG5cblxuXG5cdGFwaS5iaW5kKCdyZWFkeScsZnVuY3Rpb24oKXtcblx0XHRhcGkucHJldmlld2VyLmJpbmQoICdhY2YtY3VzdG9taXplLWNvbnRleHQnLCBmdW5jdGlvbiggbmV3X3ZhbCApIHtcblx0XHRcdHZhciBwcmV2X3ZhbDtcblx0XHRcdHByZXZfdmFsID0gYWNmX2N1c3RvbWl6ZV9jb250ZXh0XG5cdFx0XHRpZiAoIEpTT04uc3RyaW5naWZ5KG5ld192YWwpICE9IEpTT04uc3RyaW5naWZ5KHByZXZfdmFsKSApIHtcblx0XHRcdFx0YXBpLnRyaWdnZXIoICdhY2YtY3VzdG9taXplLWNvbnRleHQtY2hhbmdlZCcsIG5ld192YWwgKVxuXHRcdFx0fVxuXHRcdFx0YWNmX2N1c3RvbWl6ZV9jb250ZXh0ID0gbmV3X3ZhbDtcblxuXHRcdH0pO1xuXG5cdFx0YXBpLnByZXZpZXdlci5iaW5kKCAnZm9jdXMtY29udHJvbC1mb3Itc2V0dGluZycsIGZ1bmN0aW9uKCBzZXR0aW5nSWQgKSB7XG5cdFx0XHQvLyBnZXQgY2xpY2tlZCBmaWVsZCAuLi5cblx0XHR9KTtcblxuXG5cdFx0YXBpLnByZXZpZXdlci5iaW5kKCAnYWNmLWZvY3VzJywgZnVuY3Rpb24oIHBhdGggKSB7XG5cdFx0XHR2YXIgc2VjdGlvbl9pZCA9IHBhdGgucG9wKCk7XG5cdFx0XHRjb25zb2xlLmxvZyhzZWN0aW9uX2lkKVxuXHRcdFx0dHJ5IHtcblx0XHRcdFx0YXBpLmNvbnRyb2wuZWFjaCggZnVuY3Rpb24oIGNvbnRyb2wgKSB7XG5cdFx0XHRcdFx0aWYgKCBjb250cm9sLmNvbnN0cnVjdG9yID09PSBhcGkuQWNmRmllbGRHcm91cENvbnRyb2wgJiYgc2VjdGlvbl9pZCA9PT0gY29udHJvbC5pZCApIHtcblx0XHRcdFx0XHRcdGNvbnRyb2wuZm9jdXNGaWVsZCggcGF0aCApO1xuXHRcdFx0XHRcdFx0dGhyb3coICdicmVhayBsb29wJyApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHR9IGNhdGNoKGVycil7fVxuXHRcdH0pO1xuXG5cdH0pO1xuXG5cblx0YXBpLmJpbmQoICdzYXZlLXJlcXVlc3QtcGFyYW1zJywgZnVuY3Rpb24ocXVlcnkpe1xuXHRcdF8uZXh0ZW5kKCBxdWVyeSwgeydhY2ZfY3VzdG9taXplX2NvbnRleHQnIDogSlNPTi5zdHJpbmdpZnkoIGFjZl9jdXN0b21pemVfY29udGV4dCApfSApIDtcblx0fSApO1xuXHQvL1xuXG4gXHRhcGkuY29udHJvbENvbnN0cnVjdG9yWydhY2ZfY3VzdG9taXplciddID0gYXBpLkFjZkZpZWxkR3JvdXBDb250cm9sO1xuXG5cdGFwaS5iaW5kKCdjaGFuZ2VzZXQtZXJyb3InLCBmdW5jdGlvbigpe1xuXHRcdC8vY29uc29sZS5sb2coYXJndW1lbnRzKVxuXHR9KTtcblxuXG5cbn0pKCB3cC5jdXN0b21pemUsIGpRdWVyeSwgYWNmX2ZpZWxkZ3JvdXBfY29udHJvbCApO1xuIl19
